name: Build and Test

on:
  workflow_call:
    inputs:
      argocd_application_name:
        required: true
        type: string
    secrets:
      argocd_token:
        required: false
      argocd_address:
        required: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Deploy
        uses: omegion/argocd-actions@v1
        with:
          address: ${{ secrets.argocd_address }}
          token: ${{ secrets.argocd_token }}
          action: sync
          appName: ${{ inputs.argocd_application_name }}